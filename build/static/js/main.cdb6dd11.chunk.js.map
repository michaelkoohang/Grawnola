{"version":3,"sources":["components/narrative/story-progress/StoryProgress.js","components/narrative/story-block/graphs/Carbon.js","components/narrative/story-block/graphs/Emissions.js","components/narrative/story-block/graphs/Gases.js","components/narrative/story-block/graphs/NetEmissionsFlow.js","components/narrative/story-block/graphs/Paris.js","components/narrative/story-block/graphs/PolarIce.js","components/narrative/story-block/graphs/SeaLevel.js","components/narrative/story-block/graphs/Sectors.js","components/narrative/story-block/graphs/Temp.js","components/narrative/story-block/StoryBlock.js","img/earth.png","components/narrative/Narrative.js","components/interactive/single/graphs/Categories.js","components/interactive/single/comparison/Comparison.js","data/interactive/national_statistics.js","components/interactive/single/graphs/Budget.js","components/interactive/single/Single.js","components/interactive/national/grid-conversions.js","components/interactive/national/Grid.js","components/interactive/national/National.js","components/interactive/control-panel/flights/FlightsModal.js","components/interactive/control-panel/cars/CarsModal.js","components/interactive/control-panel/shipping/ShippingModal.js","components/interactive/emission_conversions.js","components/interactive/control-panel/headers.js","components/interactive/control-panel/ControlPanel.js","components/interactive/selectors.js","components/interactive/Interactive.js","components/footer/Footer.js","components/App.js","index.js"],"names":["StoryProgress","props","bars","i","text","length","story","push","Grid","Column","Progress","color","inverted","indicating","percent","className","columns","Row","margin","width","height","Carbon","d3Container","useRef","data","useEffect","current","select","remove","svg","append","attr","x","scaleTime","domain","extent","d","Date","date","range","y","call","axisBottom","scaleLinear","max","value","min","axisLeft","style","datum","line","bisect","bisector","left","focus","focusText","focusSubtext","html","on","event","xy","pointer","x0","invert","selectedData","ref","Emissions","gases","sectors","Table","celled","structured","Header","HeaderCell","colSpan","textAlign","rowSpan","map","sector","name","key","Body","gas","Cell","emissions","Icon","size","outerRadius","Math","Gases","colorScale","scaleSequential","interpolator","interpolateCool","classed","arcGenerator","arc","innerRadius","pieGenerator","pie","padAngle","donut","selectAll","enter","formula","centroid","id","NetEmissionsFlow","scaleBand","emission","padding","carbon","bandwidth","round","Paris","grouped_data","group","pathway","year","ticks","get","PolarIce","xAxis","mass","idleTimeout","brush","brushX","selection","move","setTimeout","idled","transition","duration","SeaLevel","level","Sectors","scaleOrdinal","children","tooltip","tooltipunits","root","hierarchy","sum","treemap","paddingTop","paddingRight","paddingInner","nodes","leaves","y0","x1","y1","colname","parent","toLocaleString","exit","subsector","filter","descendants","depth","Temp","StoryBlock","useState","tempCarbonActive","setTempCarbonActive","seaIceActive","setSeaIceActive","dangerouslySetInnerHTML","__html","heading","subtext","facts","fact","index","icon","icon_color","message","header","Message","Container","Button","Group","onClick","Or","temp","polar_ice","sea_level","greenhouse_gases","net_emissions_flow","paris","Narrative","modalOpen","setModalOpen","currentStory","setCurrentStory","visible","storyBlocks","Transition","animation","handleKeyPress","document","addEventListener","removeEventListener","onKeyPress","Modal","basic","onClose","open","Content","Actions","src","earth","alt","href","positive","Categories","interpolateWarm","total_carbon","reduce","a","b","arcLabel","posA","posB","posC","midAngle","startAngle","endAngle","PI","charAt","toUpperCase","slice","pos","Comparison","offsets","total","setTotal","progress","NATIONAL_STATS","avg_per_capita_emissions","budget","budget_per_capita","total_emissions_2018","total_pop","heightTranslated","Budget","per_capita_limit","Single","emissionsTotal","setEmissionsTotal","offsetsTotal","setOffsetsTotal","budgetData","setBudgetData","emissionsData","setEmissionsData","new_emissions_data","electricity","flights","cars","shipping","new_emissions_total","new_offset_total","vegan","carFree","ledBulbs","trees","Segment","widths","MAX_GRID_SIZE","getTotalSquares","getGridColor","cellSize","floor","offset","updateGrid","newEmissions","emissionCells","cell","formatted","getGridLabel","National","people","getEmissions","FlightsModal","oneWayRoundTrip","setOneWayRoundTrip","fromDestination","setFromDestination","toDestination","setToDestination","errorHidden","setErrorHidden","openFlights","content","Dropdown","fluid","options","airports","placeholder","search","onChange","Radio","label","checked","negative","hidden","toggleFlightsModal","labelPosition","flight","updateFlights","addFlight","CarsModal","miles","setMiles","frequency","setFrequency","openCars","Input","type","target","driving_frequency","toggleCarsModal","parseInt","updateCars","err","addCar","ShippingModal","weight","setWeight","distance","setDistance","method","setMethod","openShipping","shipping_methods","toggleShippingModal","new_weight","parseFloat","new_distance","item","updateShipping","addShipping","multiplier","emissionsTitle","electricityTitle","flightsTitle","carsTitle","shippingTitle","offsetsTitle","multipliersTitle","ControlPanel","electricityLabel","setElectricityLabel","treesLabel","setTreesLabel","setOpenFlights","setOpenCars","setOpenShipping","introOpen","setIntroOpen","Popup","trigger","onAfterChange","updateElectricity","step","as","Label","from","to","oneWayRound","animated","deleteFlight","car","deleteCar","shipment","deleteShipping","Checkbox","updateOffsets","updatePeople","dots","List","ordered","Item","createSelector","s","getTotalCarbon","values","pick","keys","Interactive","setElectricity","setFlights","setCars","setShipping","setVegan","setCarFree","setLedBulbs","setTrees","setPeople","getCarbon","json","fetch","headers","body","JSON","stringify","then","response","console","info","attributes","carbon_kg","catch","error","totalCarbon","stretched","kwh","new_electricity","concat","uuidv4","new_item","Footer","stackable","Menu","secondary","App","exact","path","component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.cdb6dd11.chunk.js","sourcesContent":["import React from 'react';\nimport './StoryProgress.css';\nimport {Grid, Progress} from \"semantic-ui-react\";\n\nimport text from '../../../data/narrative/text.json';\n\nfunction StoryProgress(props) {\n\n  const bars = [];\n\n  for (let i = 0; i < text.length; i++) {\n    if (i <= props.story) {\n      bars.push(\n        <Grid.Column key={i}>\n          <Progress color='grey' inverted indicating percent={100}/>\n        </Grid.Column>\n      );\n    } else {\n      bars.push(\n        <Grid.Column key={i}>\n          <Progress className=\"inactive\" percent={100}/>\n        </Grid.Column>\n      );\n    }\n  }\n\n  return (\n    <div className=\"story-progress\">\n      <Grid columns={text.length}>\n        <Grid.Row>\n          {bars}\n        </Grid.Row>\n      </Grid>\n    </div>\n  );\n}\n\nexport default StoryProgress;\n","import React, {useEffect, useRef} from 'react';\nimport {pointer, select} from 'd3-selection';\nimport {scaleTime} from \"d3-scale\";\nimport {bisector, extent} from \"d3-array\";\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear} from \"d3-scale\";\nimport {max, min} from \"d3-array\";\nimport {line} from \"d3-shape\";\nimport {brushX} from \"d3-brush\";\n\n// TODO pass width/height and radii as props\nconst margin = {top: 0, right: 0, bottom: 60, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction Carbon(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      var x = scaleTime()\n        .domain(extent(data, function(d) { return new Date(d.date); }))\n        .range([ 0, width ]);\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(axisBottom(x));\n\n      var y = scaleLinear()\n        .domain([max(data, function(d) { return +d.value; }), min(data, function(d) { return +d.value; })])\n        .range([ 0, height]);\n      svg.append(\"g\")\n        .call(axisLeft(y));\n\n      // Add labels for each axis\n      var yAxisLabelText = 'CO\\u2082 (parts per million)';\n      var xAxisLabelText = 'Date';\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', `translate(180,390)`)\n        .text(xAxisLabelText);\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(-40,230), rotate(270)\")\n        .text(yAxisLabelText);\n\n      svg\n        .append(\"path\")\n        .datum(data)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#FF453A\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line()\n          .x(function(d) { return x(new Date(d.date)) })\n          .y(function(d) { return y(d.value) })\n        )\n\n      // This allows to find the closest X index of the mouse:\n      var bisect = bisector(function(d) { return new Date(d.date); }).left;\n\n      // Create the circle that travels along the curve of chart\n      var focus = svg\n        .append('g')\n        .append('circle')\n        .style(\"fill\", \"white\")\n        .attr(\"stroke\", \"white\")\n        .attr('r', 4.5)\n        .style(\"opacity\", 0)\n\n      // Create the text that travels along the curve of chart\n      var focusText = svg\n        .append('g')\n        .append('text')\n        .style(\"opacity\", 0)\n        .style(\"fill\", \"#FF453A\")\n        .style('font-size', '48px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(50,80)')\n\n      var focusSubtext = svg\n        .append('g')\n        .append('text')\n        .html('ppm')\n        .style(\"opacity\", 0)\n        .style(\"fill\", \"#FF453A\")\n        .style('font-size', '48px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(50,120)')\n\n      svg\n        .append('rect')\n        .style(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\")\n        .attr('width', width)\n        .attr('height', height)\n        .on('mouseover', mouseover)\n        .on('mousemove', mousemove)\n        .on('mouseout', mouseout);\n\n\n      // What happens when the mouse move -> show the annotations at the right positions.\n      function mouseover() {\n        focus.style(\"opacity\", 1)\n        focusText.style(\"opacity\",1)\n        focusSubtext.style(\"opacity\",1)\n\n      }\n\n      function mousemove(event, d) {\n        // recover coordinate we need\n        let xy = pointer(event);\n        var x0 = x.invert(xy[0]);\n        var i = bisect(data, x0, 1);\n        if (i < data.length) {\n          let selectedData = {\"x\": new Date(data[i].date), \"y\": data[i].value};\n          focus\n            .attr(\"cx\", x(selectedData.x))\n            .attr(\"cy\", y(selectedData.y));\n          focusText\n            .html(`${selectedData.y}`)\n        }\n\n      }\n      function mouseout() {\n        focus.style(\"opacity\", 0)\n        focusText.style(\"opacity\", 0)\n        focusSubtext.style(\"opacity\",0)\n      }\n\n    }\n  },[data, d3Container.current]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default Carbon;\n","import React from 'react';\nimport {Icon, Table} from \"semantic-ui-react\";\nimport {map} from 'lodash';\n\nimport './SvgStyles.css';\n\nfunction Emissions(props) {\n  const {gases, sectors} = props.data;\n\n  return (\n    <div className='table-container'>\n      <Table celled inverted structured>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell colSpan='8' textAlign='center'>\n              Opportunities for Reducing Emissions\n            </Table.HeaderCell>\n          </Table.Row>\n          <Table.Row>\n            <Table.HeaderCell rowSpan='2'>\n              Gas\n            </Table.HeaderCell>\n            <Table.HeaderCell colSpan='7' textAlign='center'>\n              Sectors\n            </Table.HeaderCell>\n          </Table.Row>\n          <Table.Row>\n            {map(sectors, sector => (\n              <Table.HeaderCell key={sector.key}>{sector.name}</Table.HeaderCell>\n            ))}\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {map(gases, gas => (\n            <Table.Row key={gas.key}>\n              <Table.Cell>{gas.name}</Table.Cell>\n              {map(gas.emissions, (sector, i) => (\n                <Table.Cell key={`${gas.key}-sector-${i}`} textAlign='center'>\n                  {sector.value\n                    ? <Icon color='green' name='checkmark' size='large' />\n                    : ''\n                  }\n                </Table.Cell>\n              ))}\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n    </div>\n  );\n}\n\nexport default Emissions;\n","import React, {useEffect, useRef} from 'react';\nimport {arc, pie} from 'd3-shape';\nimport {interpolateCool, schemeTableau10} from 'd3-scale-chromatic';\nimport {scaleSequential} from 'd3-scale';\nimport {select} from 'd3-selection';\nimport './SvgStyles.css';\n\n// SOURCES\n// https://medium.com/@Elijah_Meeks/interactive-applications-with-react-d3-f76f7b3ebc71\n// https://chartio.com/resources/tutorials/how-to-resize-an-svg-when-the-window-is-resized-in-d3-js/\n\nconst margin = {top: 10, right: 10, bottom: 10, left: 10};\n// TODO pass width/height and radii as props\nconst width = 320;\nconst height = 320;\nconst innerRadius = 70;\nconst outerRadius = Math.min(width, height) / 2.4 - margin.top - margin.bottom;\n\nfunction Gases(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  const colorScale = scaleSequential()\n    .interpolator(interpolateCool)\n    .domain([0, data.length]);\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      // remove the old svg\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      // create new svg\n      const svg = select(d3Container.current)\n        .append('svg')\n        .attr('preserveAspectRatio', 'xMinYMin meet')\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .classed('svg-content', true)\n        .append('g')\n        .attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n      const arcGenerator = arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius);\n\n      const pieGenerator = pie()\n        .padAngle(0)\n        .value(d => d.value);\n\n      const donut = svg\n        .selectAll()\n        .data(pieGenerator(data))\n        .enter();\n\n      donut.append('path')\n        .attr('d', arcGenerator)\n        .style('fill', (d, i) => colorScale(i))\n        .style('stroke-width', 0);\n      // TODO add interactivity so that when you hover different sections of the\n      // donut, you can preview info on each of the greenhouse gases\n\n      svg.append('text')\n        .style(\"opacity\", 1)\n        .style(\"fill\", \"white\")\n        .style('font-size', '9px')\n        .style('font-weight', '100')\n        .style('font-family', 'Helvetica')\n        .text('Overview of US Greenhouse Gas Emissions in 2018')\n        .attr('transform',`translate(${-width/2.8},${-140})`)\n\n      // Add labels\n      donut.append('text')\n        .attr('text-anchor', 'middle')\n        .attr('aligment-baseline', 'middle')\n        .attr('font-size', '12px')\n        .text(d => d.data.formula || d.data.name)\n        .style('fill', 'white')\n        .attr('transform', (d) => {\n          const [x, y] = arcGenerator.centroid(d);\n          return (d.data.name === 'HFCs')\n            ? `translate(${x}, ${y - 10})`\n            : `translate(${x}, ${y})`;\n        });\n\n      donut.append('text')\n        .attr('text-anchor', 'middle')\n        .attr('aligment-baseline', 'middle')\n        .attr('font-size', '10px')\n        .text(d => `(${d.value}%)`)\n        .style('fill', 'white')\n        .attr('transform', (d) => {\n          const [x, y] = arcGenerator.centroid(d);\n          return (d.data.name === 'HFCs')\n            ? `translate(${x}, ${y})`\n            : `translate(${x}, ${y + 13})`;\n        });\n\n      // NOTE if you comment out the code for the labels above,\n      // and instead use the code that's commented out below, you get labels\n      // with fancy lines outside of the donut.\n      // TODO figure out how to size the svg properly so that the labels\n      // are not cut out of the svg bounds\n      // const arcLabel = arc()\n      //   .innerRadius(outerRadius * 0.9)\n      //   .outerRadius(outerRadius * 0.9);\n\n      // donut.append('polyline')\n      //   .attr('stroke', 'white')\n      //   .style('fill', 'none')\n      //   .attr('stroke-width', 1)\n      //   .attr('points', (d) => {\n      //     const posA = arcGenerator.centroid(d);\n      //     const posB = arcLabel.centroid(d);\n      //     const posC = arcLabel.centroid(d);\n      //     const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2\n      //     posC[0] = outerRadius * 0.88 * (midAngle < Math.PI ? 1 : -1);\n      //     return [posA, posB, posC];\n      //   });\n      // donut.append('text')\n      //   .text(d => d.data.name)\n      //   .attr('transform', (d) => {\n      //     const pos = arcLabel.centroid(d);\n      //     const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n      //     pos[0] = outerRadius * 0.9 * (midAngle < Math.PI ? 1 : -1);\n      //     return `translate(${pos})`;\n      //   })\n      //   .style('text-anchor', (d) => {\n      //     const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n      //     return (midAngle < Math.PI ? 'start' : 'end');\n      //   })\n      //   .style('fill', 'white');\n    }\n  },\n  [data, d3Container.current]);\n\n  return (\n    <div id=\"container\" className=\"svg-container\" ref={d3Container} />\n  );\n}\n\nexport default Gases;\n","import React, {useEffect, useRef} from 'react';\nimport {select} from 'd3-selection';\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear, scaleBand} from \"d3-scale\";\nimport {extent, max} from \"d3-array\";\nimport {line} from \"d3-shape\";\n\n// TODO pass width/height and radii as props\nconst margin = {top: 30, right: 0, bottom: 100, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 280 + margin.top + margin.bottom;\n\nfunction NetEmissionsFlow(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      var x = scaleBand()\n        .range([ 0, width ])\n        .domain(data.map(function(d) { return d.emission; }))\n        .padding(0.2);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(axisBottom(x))\n        .selectAll(\"text\")\n        .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n        .style(\"text-anchor\", \"end\");\n\n// Add Y axis\n      var y = scaleLinear()\n        .domain([-40, 40])\n        .range([ height, 0]);\n      svg.append(\"g\")\n        .call(axisLeft(y));\n\n      var yAxisLabelText = 'CO\\u2082 Emissions (kg)';\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(-50,270), rotate(270)\")\n        .text(yAxisLabelText);\n\n// Bars\n      svg.selectAll(\"mybar\")\n        .data(data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", function(d) { return x(d.emission); })\n        .attr(\"y\", function(d) {\n          if (d.carbon > 0) {\n            return y(d.carbon);\n          } else {\n            return y(0);\n          }\n        })\n        .attr(\"width\", x.bandwidth())\n        .attr(\"height\", function(d) {\n          if (d.carbon > 0) {\n            return height/2 - y(d.carbon);\n          } else {\n            return height/2 - y(-d.carbon);\n          }\n        })\n        .attr(\"fill\", (d) => {\n          if (d.carbon > 0) {\n            return \"#FF453A\"\n          } else {\n            return \"#32D74B\"\n          }\n        })\n\n      svg.selectAll(\"mybar\")\n        .data(data)\n        .enter()\n        .append('text')\n        .attr('fill', 'white')\n        .attr('font-size', '12px')\n        .attr('font-weight', '800')\n        .text(function(d) {\n          return `${Math.round(d.carbon)}`\n        })\n        .attr(\"x\", function(d){\n          if (d.emission === '1 Tree Planted') {\n            return x(d.emission) + 13;\n          }\n          return x(d.emission) + 20;\n        })\n        .attr(\"y\", function(d) {\n          if (d.carbon < 0) {\n            return y(d.carbon) + 20;\n          } else {\n            return y(d.carbon) - 10;\n          }\n        });\n\n\n      svg.append(\"line\")\n        .attr(\"x1\", 0 )\n        .attr(\"x2\", width )\n        .attr(\"y1\", height / 2)\n        .attr(\"y2\", height / 2)\n        .attr(\"stroke\", \"grey\")\n        .attr(\"stroke-dasharray\", \"4\")\n\n      svg.append('text')\n        .style('font-size', '14px')\n        .style('font-weight', '100')\n        .style('font-family', 'Helvetica')\n        .text('CO\\u2082 Swaps')\n        .style(\"fill\", \"white\")\n        .attr('transform','translate(150,-18)')\n\n    }\n  },[data, d3Container.current]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default NetEmissionsFlow;\n","import React, {useEffect, useRef} from 'react';\nimport {select} from 'd3-selection';\nimport {scaleTime} from \"d3-scale\";\nimport {extent} from \"d3-array\";\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear, scaleOrdinal} from \"d3-scale\";\nimport {max, min} from \"d3-array\";\nimport {line} from \"d3-shape\";\nimport {group} from \"d3-array\";\n\n// TODO pass width/height and radii as props\nconst margin = {top: 30, right: 20, bottom: 60, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction Paris(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      // group the data: I want to draw one line per group\n      var grouped_data = group(data, d => d.pathway);\n      // console.log(grouped_data);\n\n      // Add X axis --> it is a date format\n      var x = scaleTime()\n        .domain(extent(data, function(d) { return new Date(d.year); }))\n        .range([ 0, width ]);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(axisBottom(x).ticks(5));\n\n      // Add Y axis\n      var y = scaleLinear()\n        .domain([0, max(data, function(d) { return +d.value; })])\n        .range([ height, 0 ]);\n      svg.append(\"g\")\n        .call(axisLeft(y));\n\n      // Add labels for each axis\n      var yAxisLabelText = 'CO\\u2082 (Gigatonnes)';\n      var xAxisLabelText = 'Date';\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', `translate(165,360)`)\n        .text(xAxisLabelText);\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(-60,210), rotate(270)\")\n        .text(yAxisLabelText);\n\n      svg.append(\"line\")\n        .attr(\"x1\", 0)\n        .attr(\"x2\", width)\n        .attr(\"y1\", y(9000))\n        .attr(\"y2\", y(9000))\n        .attr(\"stroke\", \"#ffcc00\")\n        .attr(\"stroke-width\", 2);\n\n      svg.append('text')\n        .text('where we\\'re headed')\n        .style(\"fill\", \"#FF453A\")\n        .style('font-size', '16px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(120,110) rotate(-30)')\n\n      svg.append('text')\n        .text('Paris Agreement')\n        .style(\"fill\", \"#32D74B\")\n        .style('font-size', '16px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(110,205) rotate(25)')\n\n      svg.append('text')\n        .text('the goal')\n        .style(\"fill\", \"#ffcc00\")\n        .style('font-size', '16px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(30,275)')\n\n      svg.append('text')\n        .style('font-size', '14px')\n        .style('font-weight', '100')\n        .style('font-family', 'Helvetica')\n        .text('Global CO\\u2082 Emissions')\n        .style(\"fill\", \"white\")\n        .attr('transform','translate(110,-18)')\n\n      // Draw the line\n      svg.append(\"path\")\n        .datum(grouped_data.get(\"6\"))\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#FF453A\")\n        .attr(\"stroke-width\", 2)\n        .attr(\"d\", line()\n          .x(function(d) { return x(new Date(d.year)) })\n          .y(function(d) { return y(d.value) })\n        )\n\n      svg.append(\"path\")\n        .datum(grouped_data.get(\"2\"))\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#32D74B\")\n        .attr(\"stroke-width\", 2)\n        .attr(\"d\", line()\n          .x(function(d) { return x(new Date(d.year)) })\n          .y(function(d) { return y(d.value) })\n        )\n    }\n  },[data, d3Container.current]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default Paris;\n","import React, {useEffect, useRef} from 'react';\nimport {select} from 'd3-selection';\nimport {scaleTime} from \"d3-scale\";\nimport {extent} from \"d3-array\";\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear} from \"d3-scale\";\nimport {max, min} from \"d3-array\";\nimport {line} from \"d3-shape\";\nimport {brushX} from \"d3-brush\";\n\n// TODO pass width/height and radii as props\nconst margin = {top: 0, right: 0, bottom: 60, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction PolarIce(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n      if (data && d3Container.current) {\n        select(d3Container.current)\n          .select('svg')\n          .remove();\n\n        const svg = select(d3Container.current)\n          .append(\"svg\")\n          .attr(\"width\", width + margin.left + margin.right)\n          .attr(\"height\", height + margin.top + margin.bottom)\n          .append(\"g\")\n          .attr(\"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        var x = scaleTime()\n          .domain(extent(data, function(d) { return new Date(d.date); }))\n          .range([ 0, width ]);\n        var xAxis = svg.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(axisBottom(x));\n\n        var y = scaleLinear()\n          .domain([max(data, function(d) { return +d.mass; }), min(data, function(d) { return +d.mass; })])\n          .range([ 0, height]);\n        svg.append(\"g\")\n          .call(axisLeft(y));\n\n        // Add labels for each axis\n        var yAxisLabelText = 'Mass (Gigatonnes)';\n        var xAxisLabelText = 'Date';\n\n        svg.append('text')\n          .style('fill', 'white')\n          .attr('transform', `translate(180,390)`)\n          .text(xAxisLabelText);\n\n        svg.append('text')\n          .style('fill', 'white')\n          .attr('transform', \"translate(-55,230), rotate(270)\")\n          .text(yAxisLabelText);\n\n        svg.append(\"line\")\n          .attr(\"x1\", 0)\n          .attr(\"x2\", width)\n          .attr(\"y1\", y(0))\n          .attr(\"y2\", y(0))\n          .attr(\"stroke\", \"grey\")\n          .attr(\"stroke-dasharray\", \"4\");\n\n        svg.append(\"defs\").append(\"svg:clipPath\")\n          .attr(\"id\", \"clip-ice\")\n          .append(\"svg:rect\")\n          .attr(\"width\", width)\n          .attr(\"height\", height)\n          .attr(\"x\", 0)\n          .attr(\"y\", 0);\n\n        var brush = brushX()\n          .extent( [ [0,0], [width,height] ] )\n          .on(\"end\", updateChart);\n\n        svg.append('g')\n          .attr(\"clip-path\", \"url(#clip-ice)\")\n          .attr('class', 'clip-path-ice')\n          .append(\"path\")\n          .datum(data)\n          .attr(\"class\", \"line\")\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \"white\")\n          .attr(\"stroke-width\", 1)\n          .attr(\"d\", line()\n            .x(function(d) { return x(new Date(d.date)) })\n            .y(function(d) { return y(d.mass) })\n          );\n\n        svg.select('.clip-path-ice')\n          .append(\"g\")\n          .attr(\"class\", \"brush-ice\")\n          .call(brush);\n\n        var idleTimeout;\n        function idled() { idleTimeout = null; }\n\n        function updateChart({selection}) {\n          if (!selection){\n            if (!idleTimeout) return idleTimeout = setTimeout(idled, 350);\n            x.domain([ 4,8]);\n          } else{\n            x.domain([ x.invert(selection[0]), x.invert(selection[1]) ])\n            select(\".brush-ice\").call(brush.move, null)\n          }\n\n          xAxis.transition().duration(1000).call(axisBottom(x))\n          svg.select('.line')\n            .transition()\n            .duration(1000)\n            .attr(\"d\", line()\n              .x(function(d) { return x(new Date(d.date)) })\n              .y(function(d) { return y(d.mass) })\n            )\n        }\n\n        svg.on(\"dblclick\",function(){\n          x.domain(extent(data, function(d) { return new Date(d.date); }))\n          xAxis.transition().call(axisBottom(x))\n          svg.select('.line')\n            .transition()\n            .attr(\"d\", line()\n              .x(function(d) { return x(new Date(d.date)) })\n              .y(function(d) { return y(d.mass) })\n            )\n        });\n\n      }\n    },[data, d3Container.current]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default PolarIce;\n","import React, {useEffect, useRef} from 'react';\nimport {select} from 'd3-selection';\nimport {scaleTime} from \"d3-scale\";\nimport {extent} from \"d3-array\";\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear} from \"d3-scale\";\nimport {max, min} from \"d3-array\";\nimport {line} from \"d3-shape\";\nimport {brushX} from \"d3-brush\";\n\n// TODO pass width/height and radii as props\nconst margin = {top: 0, right: 10, bottom: 60, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction SeaLevel(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      var x = scaleTime()\n        .domain(extent(data, function(d) { return new Date(d.date); }))\n        .range([ 0, width ]);\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(axisBottom(x));\n\n      var y = scaleLinear()\n        .domain([max(data, function(d) { return +d.level; }), min(data, function(d) { return +d.level; })])\n        .range([0, height]);\n      svg.append(\"g\")\n        .call(axisLeft(y));\n\n      // Add labels for each axis\n      var yAxisLabelText = 'Sea Level Change (mm)';\n      var xAxisLabelText = 'Date';\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', `translate(180,390)`)\n        .text(xAxisLabelText);\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(-40,230), rotate(270)\")\n        .text(yAxisLabelText);\n\n      svg.append(\"line\")\n        .attr(\"x1\", 0)\n        .attr(\"x2\", width)\n        .attr(\"y1\", y(0))\n        .attr(\"y2\", y(0))\n        .attr(\"stroke\", \"grey\")\n        .attr(\"stroke-dasharray\", \"4\");\n\n      svg.append(\"defs\").append(\"svg:clipPath\")\n        .attr(\"id\", \"clip-sea\")\n        .append(\"svg:rect\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"x\", 0)\n        .attr(\"y\", 0);\n\n      var brush = brushX()\n        .extent( [ [0,0], [width,height] ] )\n        .on(\"end\", updateChart);\n\n      svg.append('g')\n        .attr(\"clip-path\", \"url(#clip-sea)\")\n        .attr('class', 'clip-path-sea')\n        .append(\"path\")\n        .datum(data)\n        .attr(\"class\", \"line\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"steelblue\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"d\", line()\n          .x(function(d) { return x(new Date(d.date)) })\n          .y(function(d) { return y(+d.level) })\n        );\n\n      svg.select('.clip-path-sea')\n        .append(\"g\")\n        .attr(\"class\", \"brush-sea\")\n        .call(brush);\n\n      var idleTimeout;\n      function idled() { idleTimeout = null; }\n\n      function updateChart({selection}) {\n        if (!selection){\n          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350);\n          x.domain([ 4,8]);\n        } else{\n          x.domain([ x.invert(selection[0]), x.invert(selection[1]) ])\n          select(\".brush-sea\").call(brush.move, null);\n        }\n\n        xAxis.transition().duration(1000).call(axisBottom(x))\n        svg.select('.line')\n          .transition()\n          .duration(1000)\n          .attr(\"d\", line()\n            .x(function(d) { return x(new Date(d.date)) })\n            .y(function(d) { return y(+d.level) })\n          )\n      }\n\n      svg.on(\"dblclick\",function(){\n        x.domain(extent(data, function(d) { return new Date(d.date); }))\n        xAxis.transition().call(axisBottom(x))\n        svg.select('.line')\n          .transition()\n          .attr(\"d\", line()\n            .x(function(d) { return x(new Date(d.date)) })\n            .y(function(d) { return y(+d.level) })\n          )\n      });\n\n    }\n  },[data, d3Container.current]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default SeaLevel;\n","import React, {useEffect, useRef} from 'react';\nimport {pointer, select} from 'd3-selection';\nimport {hierarchy, treemap} from 'd3-hierarchy';\nimport {scaleLinear, scaleOrdinal} from 'd3-scale';\nimport {filter, map} from 'lodash';\n\nimport './SvgStyles.css';\n\n// SOURCES\n// https://www.d3-graph-gallery.com/graph/treemap_custom.html\n// https://www.pluralsight.com/guides/d3-treemap-in-react\n\n// set the dimensions and margins of the graph\nconst margin = {top: 30, right: 10, bottom: 10, left: 10};\n// TODO pass width and height as props\nconst width = 900;\nconst height = 900;\n\nfunction Sectors(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      const color = scaleOrdinal()\n        .domain(map(data.children, sector => sector.name))\n        .range([\n          '#FF2D55', // Transportation\n          '#64D2FF', // Electricity\n          '#FF9F0A', // Industry\n          '#32D74B', // Agriculture\n          // '#5E5CE6', // Commercial\n          '#BF5AF2' // Residential\n        ]);\n\n      const opacity = scaleLinear()\n        .domain([0, 17]) // NOTE hardcoded values for transportation sub-sectors\n        .range([.6,1]);\n\n      // remove the old svg\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      // create new svg\n      const svg = select(d3Container.current)\n        .append('svg')\n        .attr('preserveAspectRatio', 'xMinYMin meet')\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .classed('svg-content', true)\n        .append('g')\n        .attr('transform', `translate(${margin.left}, ${margin.top})`)\n        .on('mousemove', mousemove)\n        .on('mouseout', mouseout);\n\n      const root = hierarchy(data)\n        .sum(d => d.value);\n\n      treemap()\n        .size([width - (margin.right + margin.left), height - (margin.top + margin.bottom)])\n        .paddingTop(30)\n        .paddingRight(margin.right)\n        .paddingInner(3)\n        .round(true)\n        (root);\n\n      const nodes = svg.selectAll('rect')\n        .data(root.leaves());\n\n      // draw rectangles\n      nodes.enter()\n        .append('rect')\n        .attr('id', d => d.data.name)\n        .attr('x', d => d.x0)\n        .attr('y', d => d.y0)\n        .attr('width', d => d.x1 - d.x0)\n        .attr('height', d => d.y1 - d.y0)\n        .style('stroke', 'white')\n        .style('fill', d => {\n          if (d.data.colname !== 'level3') return 'none';\n          // if (d.data.name === 'Transportation') return 'white';\n          // return color(d.parent && d.parent.data.name !== 'Sectors'\n          //   ? d.parent.data.name\n          //   : d.data.name)\n          return color(d.parent.data.name);\n        })\n        .style('opacity', 1)\n        .on('mouseover', mouseover);\n\n      nodes.exit().remove()\n\n      const nodeText = svg\n        .selectAll('text')\n        .data(root.leaves());\n\n      // add main text\n      nodeText.enter()\n        .append('text')\n        .attr('x', d => d.x0 + 5)\n        .attr('y', d => d.y0 + 20)\n        .text(d => d.data.subsector\n          ? d.data.name\n          : '')\n        .attr('font-size', '18px')\n        .attr('fill', 'white')\n\n      const nodeVals = svg.selectAll('vals')\n        .data(root.leaves())\n\n      // display the values\n      nodeVals.enter()\n        .append('text')\n        .attr('x', d => d.x0 + 5)\n        .attr('y', d => d.y0 + 40)\n        .text(d => d.data.subsector\n          ? `${d.data.percent}%`\n          : '')\n        .attr('font-size', '16px')\n        .attr('fill', 'white')\n\n      // parent node titles\n      svg.selectAll('titles')\n        .data(filter(root.descendants(), sector => sector.depth === 1))\n        .enter()\n        .append('text')\n        .attr('x', d => d.x0)\n        .attr('y', d => d.y0 + 24)\n        .text(d => `${d.data.name} (${d.data.percent}%)`)\n        .attr('font-size', d => d.data.name === 'Agriculture'\n          ? '21px'\n          : '24px')\n        .attr('fill', d => color(d.data.name));\n\n      // Add title\n      svg.append('text')\n        .style(\"opacity\", 1)\n        .style(\"fill\", \"white\")\n        .style('font-size', '24px')\n        .style('font-weight', '100')\n        .style('font-family', 'Helvetica')\n        .text('Total US Greenhouse Gas Emissions by Sector 2018')\n        .attr('transform',`translate(${width/6},${-10})`)\n\n      var tooltip = svg.append('text')\n        .style(\"opacity\", 0)\n        .style(\"fill\", \"white\")\n        .style('font-size', '32px')\n        .style('font-weight', '600')\n        .style('font-family', 'Helvetica')\n        .style('z-index', 999)\n        .attr('x',0)\n        .attr('y', 0)\n\n      var tooltipunits = svg.append('text')\n        .text('million mt')\n        .style(\"opacity\", 0)\n        .style(\"fill\", \"white\")\n        .style('font-size', '32px')\n        .style('font-weight', '600')\n        .style('font-family', 'Helvetica')\n        .style('z-index', 999)\n        .attr('x',0)\n        .attr('y', 0)\n\n      function mouseout(event, d) {\n        tooltip.style('opacity', 0);\n        tooltipunits.style('opacity', 0);\n      }\n\n      function mousemove(event, d) {\n        let xy = pointer(event);\n        tooltip\n          .attr('x', xy[0] + 15)\n          .attr('y', xy[1])\n        tooltipunits\n          .attr('x', xy[0] + 15)\n          .attr('y', xy[1] + 35)\n      }\n\n      function mouseover(event, d) {\n        tooltip.style('opacity', 1)\n          .text(`~ ${(Math.round(d.data.carbon * 1000)).toLocaleString()}`);\n        tooltipunits.style('opacity', 1)\n      }\n    }\n\n  },\n  [data, d3Container.current]);\n\n  return (\n    <div id=\"container\" className=\"svg-container\" ref={d3Container} />\n  );\n}\n\nexport default Sectors;\n","import React, {useEffect, useRef} from 'react';\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {brushX} from \"d3-brush\";\nimport {bisector, extent, max} from \"d3-array\";\nimport {line} from \"d3-shape\";\nimport {scaleLinear, scaleTime} from \"d3-scale\";\nimport {pointer, select} from 'd3-selection';\n\nconst margin = {top: 0, right: 20, bottom: 60, left: 80},\n  width = 460 - margin.left - margin.right,\n  height = 400 - margin.top - margin.bottom;\n\nfunction Temp(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      var x = scaleTime()\n        .domain(extent(data, function(d) { return new Date(d.date); }))\n        .range([ 0, width ]);\n      var xAxis = svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(axisBottom(x).ticks(5));\n\n      var y = scaleLinear()\n        .domain([-0.5, max(data, function(d) { return +d.value; })])\n        .range([ height, 0 ]);\n      svg.append(\"g\")\n        .call(axisLeft(y));\n\n      var yAxisLabelText = 'Temperature Anomaly (C)';\n      var xAxisLabelText = 'Date';\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', `translate(180,390)`)\n        .text(xAxisLabelText);\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(-40,230), rotate(270)\")\n        .text(yAxisLabelText);\n\n      svg.append(\"path\")\n        .datum(data)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#FF453A\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"d\", line()\n          .x(function(d) { return x(new Date(d.date)) })\n          .y(function(d) { return y(d.value) })\n        )\n\n      svg.append(\"line\")\n        .attr(\"x1\", 0)\n        .attr(\"x2\", width)\n        .attr(\"y1\", y(0))\n        .attr(\"y2\", y(0))\n        .attr(\"stroke\", \"grey\")\n        .attr(\"stroke-dasharray\", \"4\");\n\n      // This allows to find the closest X index of the mouse:\n      var bisect = bisector(function(d) { return new Date(d.date); }).left;\n\n      // Create the circle that travels along the curve of chart\n      var focus = svg\n        .append('g')\n        .append('circle')\n        .style(\"fill\", \"white\")\n        .attr(\"stroke\", \"white\")\n        .attr('r', 4.5)\n        .style(\"opacity\", 0)\n\n      // Create the text that travels along the curve of chart\n      var focusText = svg\n        .append('g')\n        .append('text')\n        .style(\"opacity\", 0)\n        .style(\"fill\", \"#FF453A\")\n        .style('font-size', '48px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .attr('transform','translate(50,100)')\n\n      svg\n        .append('rect')\n        .style(\"fill\", \"none\")\n        .style(\"pointer-events\", \"all\")\n        .attr('width', width)\n        .attr('height', height)\n        .on('mouseover', mouseover)\n        .on('mousemove', mousemove)\n        .on('mouseout', mouseout);\n\n\n      // What happens when the mouse move -> show the annotations at the right positions.\n      function mouseover() {\n        focus.style(\"opacity\", 1)\n        focusText.style(\"opacity\",1)\n      }\n\n      function mousemove(event, d) {\n        // recover coordinate we need\n        let xy = pointer(event);\n        var x0 = x.invert(xy[0]);\n        var i = bisect(data, x0, 1);\n        if (i < data.length) {\n          let selectedData = {\"x\": new Date(data[i].date), \"y\": data[i].value};\n          focus\n            .attr(\"cx\", x(selectedData.x))\n            .attr(\"cy\", y(selectedData.y));\n          focusText\n            .html(`${selectedData.y} C`)\n        }\n\n      }\n      function mouseout() {\n        focus.style(\"opacity\", 0)\n        focusText.style(\"opacity\", 0)\n      }\n\n    }\n  },[data]);\n\n  return (\n    <div ref={d3Container} />\n  );\n}\n\nexport default Temp;\n","import React, {useState} from 'react';\nimport {Button, Container, Grid, Icon, Message} from \"semantic-ui-react\";\n\nimport './StoryBlock.css';\n\nimport Carbon from \"./graphs/Carbon\";\nimport Emissions from './graphs/Emissions';\nimport Gases from './graphs/Gases';\nimport NetEmissionsFlow from \"./graphs/NetEmissionsFlow\";\nimport Paris from './graphs/Paris';\nimport PolarIce from './graphs/PolarIce';\nimport SeaLevel from './graphs/SeaLevel';\nimport Sectors from './graphs/Sectors';\nimport Temp from \"./graphs/Temp\";\n\nimport carbon from '../../../data/narrative/carbon.json';\nimport emissions from '../../../data/narrative/emissions.json';\nimport greenhouse_gases from '../../../data/narrative/greenhouse_gases.json';\nimport net_emissions_flow from '../../../data/narrative/net_emissions_flow.json';\nimport sectors from '../../../data/narrative/sectors.json';\nimport temp from '../../../data/narrative/temp.json';\nimport text from '../../../data/narrative/text.json';\nimport sea_level from '../../../data/narrative/sea_level.json';\nimport polar_ice from '../../../data/narrative/polar_ice.json';\nimport paris from '../../../data/narrative/paris.json';\n\nfunction StoryBlock(props) {\n\n  const [tempCarbonActive, setTempCarbonActive] = useState(0);\n  const [seaIceActive, setSeaIceActive] = useState(0);\n\n  return (\n    <div className=\"story-block\">\n      { props.story >= 0 &&\n        <Grid columns={2}>\n          <Grid.Column >\n            <h1 className=\"story-heading\" dangerouslySetInnerHTML={{__html: text[props.story].heading}}/>\n            {text[props.story].subtext.length > 0 &&\n            <p className=\"story-subtext\" dangerouslySetInnerHTML={{__html: text[props.story].subtext}}/>\n            }\n            { text[props.story].facts.length > 0 &&\n              text[props.story].facts.map((fact, index) => (\n                <div className=\"fact\" key={index}>\n                  <Icon className=\"fact-icon\" name={fact.icon} color={fact.icon_color}/>\n                  <p className=\"fact-text\" dangerouslySetInnerHTML={{__html: fact.text}}/>\n                </div>\n              ))\n            }\n            { text[props.story].message.header.length > 0 && text[props.story].message.text.length > 0 &&\n              <Message className=\"story-message\" color='black'>\n                <Message.Header><Icon name={text[props.story].message.icon || 'star'}/>\n                  {text[props.story].message.header}\n                </Message.Header>\n                <p>{text[props.story].message.text}</p>\n              </Message>\n            }\n          </Grid.Column>\n          <Grid.Column>\n            { props.story === 0 && // temp and co2\n              <Container className='temp-carbon-container'>\n                <Button.Group>\n                  <Button className={tempCarbonActive ? \"active\" : \"negative\"} onClick={() => setTempCarbonActive(0)}>Temperature</Button>\n                  <Button.Or />\n                  <Button className={tempCarbonActive ? \"negative\" : \"active\"} onClick={() => setTempCarbonActive(1)}>CO<sub>2</sub></Button>\n                </Button.Group>\n                { tempCarbonActive\n                  ? <Carbon data={carbon} />\n                  : <Temp data={temp} />\n                }\n              </Container>\n            }\n            { props.story === 1 && // sea levels and ice caps\n              <Container className='ice-sea-container'>\n                <Button.Group>\n                  <Button className={seaIceActive ? \"active\" : \"primary\"} onClick={() => setSeaIceActive(0)}>Sea Level</Button>\n                  <Button.Or />\n                  <Button className={seaIceActive ? \"primary\" : \"active\"} onClick={() => setSeaIceActive(1)}>Ice Caps</Button>\n                </Button.Group>\n                { seaIceActive\n                  ? <PolarIce data={polar_ice} />\n                  : <SeaLevel data={sea_level} />\n                }\n              </Container>\n            }\n            { props.story === 2 && // how did we get here? -- greenhouse gases\n              <Gases data={greenhouse_gases} />\n            }\n            { props.story === 3 && // why do we focus on co2?\n              <Emissions data={emissions} />\n            }\n            { props.story === 4 && // why do we focus on individual action?\n              <Sectors data={sectors} />\n            }\n            { props.story === 5 && // how do we stay in budget?\n              <Container className='budget-container'>\n                <NetEmissionsFlow data={net_emissions_flow} />\n              </Container>\n            }\n            { props.story === 6 && // Paris Climate Accord\n              <Container className='paris-container'>\n                <Paris data={paris}/>\n              </Container>\n            }\n          </Grid.Column>\n        </Grid>\n      }\n    </div>\n  );\n}\n\nexport default StoryBlock;\n","export default __webpack_public_path__ + \"static/media/earth.413f91ba.png\";","import {Button, Container, Header, Icon, Modal, Transition} from \"semantic-ui-react\";\nimport React, {useState, useEffect} from 'react';\nimport StoryProgress from \"./story-progress/StoryProgress\";\nimport StoryBlock from \"./story-block/StoryBlock\";\nimport './Narrative.css';\nimport earth from '../../img/earth.png';\n\nimport text from '../../data/narrative/text.json';\n\nfunction Narrative() {\n  const [modalOpen, setModalOpen] = useState(true);\n  const [currentStory, setCurrentStory] = useState(-1);\n  const [visible] = useState([true, false, false, false, false, false, false, false]);\n  const storyBlocks = [];\n\n  // Set up each story block. Needed for the animation between blocks to work.\n  for (let i = 0; i < text.length; i++) {\n    storyBlocks.push (\n      <Transition visible={visible[i]} animation='fade' duration={500} key={i}>\n        <Container>\n          <StoryBlock story={i}/>\n        </Container>\n      </Transition>\n    )\n  }\n\n  // Handler for keyboard presses.\n  function handleKeyPress(event) {\n    if (event.key === \"ArrowLeft\" && currentStory >= 0) {\n      visible[currentStory] = false;\n      visible[currentStory - 1] = true;\n      setCurrentStory(currentStory - 1);\n    }\n    if (event.key === \"ArrowRight\" && currentStory < text.length - 1) {\n      visible[currentStory] = false;\n      visible[currentStory + 1] = true;\n      setCurrentStory(currentStory + 1);\n    }\n  }\n\n  // Add keyboard listener for arrow keys\n  useEffect(() => {\n    document.addEventListener(\"keydown\", handleKeyPress, false);\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyPress, false);\n    };\n  });\n\n  return (\n    <div className=\"narrative\" onKeyPress={() => handleKeyPress()}>\n      <Container>\n        <Modal\n          basic\n          onClose={() => setModalOpen(false)}\n          open={modalOpen}\n          size='small'\n        >\n          <Header icon>\n            <div className=\"modal-icons\">\n              <Icon name='arrow left' />\n              <Icon name='keyboard' />\n              <Icon name='arrow right' />\n            </div>\n            <p className=\"modal-title\">Navigate with your keyboard</p>\n          </Header>\n          <Modal.Content>\n            <p className=\"modal-content\">\n              Use the left and right arrow keys on your keyboard to move through the visualizations.\n            </p>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button color='green' inverted onClick={() => setModalOpen(false)}>\n              <Icon name='checkmark' /> Ok\n            </Button>\n          </Modal.Actions>\n        </Modal>\n        <Transition visible={currentStory < 0} animation='fade' duration={500}>\n          <Container className=\"title-block\">\n            <h1>Our global ecosystem <span id='resiliently'>resiliently</span> supports life on earth, but...</h1>\n            <img src={earth} alt='Earth'/>\n          </Container>\n        </Transition>\n        <Transition visible={currentStory >= 0} animation='fade' duration={500}>\n          <Container>\n            <StoryProgress story={currentStory} />\n            <Container className=\"story-container\">\n              {storyBlocks}\n            </Container>\n          </Container>\n        </Transition>\n      </Container>\n      { currentStory < text.length - 1\n        ? (<a href=\"#/interactive\" className=\"skip-viz\">\n            Skip to your CO<sub>2</sub> impact<Icon name=\"arrow right\"/>\n          </a>)\n        : (<Button href=\"#/interactive\" className=\"go-viz\" positive>\n            Explore your CO<sub>2</sub> impact<Icon name=\"arrow right\"/>\n          </Button>)\n      }\n    </div>\n  );\n}\n\nexport default Narrative;\n","import React, {useEffect, useRef} from 'react';\nimport {arc, pie} from 'd3-shape';\nimport {interpolateCool, interpolateWarm} from 'd3-scale-chromatic';\nimport {scaleSequential} from 'd3-scale';\nimport {select} from 'd3-selection';\nimport {round} from 'lodash';\n\n// import './SvgStyles.css';\n\n// SOURCES\n// https://medium.com/@Elijah_Meeks/interactive-applications-with-react-d3-f76f7b3ebc71\n// https://chartio.com/resources/tutorials/how-to-resize-an-svg-when-the-window-is-resized-in-d3-js/\n\nconst margin = {top: 10, right: 10, bottom: 10, left: 10};\n// TODO pass width/height and radii as props\nconst width = 300;\nconst height = 300;\nconst innerRadius = 65;\nconst outerRadius = Math.min(width, height) / 2.5 - margin.top - margin.bottom;\n\nfunction Categories(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  const colorScale = scaleSequential()\n    .interpolator(interpolateWarm)\n    .domain([0, data.length]);\n\n  useEffect(() => {\n      if (data && d3Container.current) {\n        let total_carbon = data.reduce((a, b) => a + (b[\"value\"] || 0), 0);\n        // remove the old svg\n        select(d3Container.current)\n          .select('svg')\n          .remove();\n\n        // create new svg\n        const svg = select(d3Container.current)\n          .append('svg')\n          .attr('preserveAspectRatio', 'xMidYMin')\n          .attr('viewBox', `0 0 ${width} ${height}`)\n          .classed('single-svg', true)\n          .append('g')\n          .attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n        svg.append('text')\n          .text(\"Emissions Categories\")\n          .attr('transform', `translate(-85,-130)`)\n          .style('fill', 'white')\n          // .style('opacity', 0.9)\n          .style('font-size', '18px')\n          .style('font-weight', '200')\n          .style('font-family', 'Helvetica')\n\n        if (total_carbon > 0) {\n          const arcGenerator = arc()\n            .innerRadius(innerRadius)\n            .outerRadius(outerRadius);\n\n          const pieGenerator = pie()\n            .padAngle(0)\n            .value(d => d.value);\n\n          const donut = svg\n            .selectAll()\n            .data(pieGenerator(data))\n            .enter();\n\n          donut.append('path')\n            .attr('d', arcGenerator)\n            .style('fill', (d, i) => colorScale(i))\n            .style('stroke-width', 0);\n          // TODO add interactivity so that when you hover different sections of the\n          // donut, you can preview info on each of the greenhouse gases\n\n          // Add labels\n          // donut.append('text')\n          //   .attr('text-anchor', 'middle')\n          //   .attr('aligment-baseline', 'middle')\n          //   .attr('font-size', '12px')\n          //   .text(d => d.data.formula || d.data.name)\n          //   .style('fill', 'white')\n          //   .attr('transform', (d) => {\n          //     const [x, y] = arcGenerator.centroid(d);\n          //     return (d.data.name === 'Fluorinated gases')\n          //       ? `translate(${x}, ${y - 15})`\n          //       : `translate(${x}, ${y})`;\n          //   });\n          //\n          // donut.append('text')\n          //   .attr('text-anchor', 'middle')\n          //   .attr('aligment-baseline', 'middle')\n          //   .attr('font-size', '10px')\n          //   .text(d => `(${d.value}%)`)\n          //   .style('fill', 'white')\n          //   .attr('transform', (d) => {\n          //     const [x, y] = arcGenerator.centroid(d);\n          //     return (d.data.name === 'Fluorinated gases')\n          //       ? `translate(${x}, ${y})`\n          //       : `translate(${x}, ${y + 13})`;\n          //   });\n\n          // NOTE if you comment out the code for the labels above,\n          // and instead use the code that's commented out below, you get labels\n          // with fancy lines outside of the donut.\n          // TODO figure out how to size the svg properly so that the labels\n          // are not cut out of the svg bounds\n          const arcLabel = arc()\n            .innerRadius(outerRadius * 0.9)\n            .outerRadius(outerRadius * 0.9);\n\n          donut.append('polyline')\n            .attr('stroke', 'white')\n            .style('fill', 'none')\n            .attr('stroke-width', 1)\n            .attr('opacity', d => {\n              if (d.data.value === 0) {\n                return \"0\"\n              }\n            })\n            .attr('points', (d) => {\n              const posA = arcGenerator.centroid(d);\n              const posB = arcLabel.centroid(d);\n              const posC = arcLabel.centroid(d);\n              const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2\n              posC[0] = outerRadius * 0.88 * (midAngle < Math.PI ? 1 : -1);\n              return [posA, posB, posC];\n            });\n\n          donut.append('text')\n            .text(d => d.data.name.charAt(0).toUpperCase() + d.data.name.slice(1))\n            .attr('opacity', d => {\n              if (d.data.value === 0) {\n                return \"0\"\n              }\n            })\n            .attr('transform', (d) => {\n              const pos = arcLabel.centroid(d);\n              const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n              pos[0] = outerRadius * 0.9 * (midAngle < Math.PI ? 1 : -1);\n              return `translate(${pos})`;\n            })\n            .style('text-anchor', (d) => {\n              const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n              return (midAngle < Math.PI ? 'start' : 'end');\n            })\n            .style('fill', 'white');\n\n          donut.append('text')\n            .text(d => (round(d.data.value).toLocaleString() + \" kg\"))\n            .attr('opacity', d => {\n              if (d.data.value === 0) {\n                return \"0\"\n              }\n            })\n            .attr('transform', (d) => {\n              const pos = arcLabel.centroid(d);\n              const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n              pos[0] = outerRadius * 0.9 * (midAngle < Math.PI ? 1 : -1);\n              return `translate(${pos}), translate(0,20)`;\n            })\n            .style('text-anchor', (d) => {\n              const midAngle = d.startAngle + (d.endAngle - d.startAngle) / 2;\n              return (midAngle < Math.PI ? 'start' : 'end');\n            })\n            .style('fill', 'white');\n        } else {\n          svg.append('text')\n            .text(\"Add data on the control panel\")\n              .attr('transform', `translate(-125,-40)`)\n            .style('fill', '#6b6b6b')\n            .style('font-size', '20px')\n            // .style('font-weight', '800')\n            .style('font-family', 'Helvetica')\n          svg.append('text')\n            .text(\"to see your emissions!\")\n            .attr('transform', `translate(-90,-10)`)\n            .style('fill', '#6b6b6b')\n            .style('font-size', '20px')\n            // .style('font-weight', '600')\n            .style('font-family', 'Helvetica')\n\n        }\n\n\n      }\n    },\n    [data, d3Container.current]);\n\n  return (\n    <div className='single-container' ref={d3Container} />\n  );\n}\n\nexport default Categories;\n","import React, {useEffect, useState} from 'react';\nimport {round} from 'lodash'\nimport {Container, Progress} from 'semantic-ui-react';\n\nfunction Comparison({emissions, offsets}) {\n\n  const [total, setTotal] = useState(0);\n\n  useEffect(() => {\n    if (offsets > emissions) {\n      setTotal(round(offsets, 2));\n    } else {\n      setTotal(round(emissions, 2));\n    }\n  }, [emissions, offsets]);\n\n  return (\n    <Container className='comparison-container'>\n      <Progress\n        color='green'\n        progress='value'\n        total={total}\n        value={round(offsets, 2)}>\n          <p style={{color: '#32D74B'}}>Offsets (kg)</p>\n      </Progress>\n      <Progress\n        color='red'\n        progress='value'\n        value={round(emissions, 2)}\n        total={total}>\n          <p style={{color: '#FF453A'}}>Emissions (kg)</p>\n      </Progress>\n    </Container>\n  );\n}\n\nexport default Comparison;\n\n\n","// NOTE EMISSIONS UNITS GIVEN IN METRIC TONS OF CO2 EQUIVALENTS\n// Assuming all emissions account for one year\nconst NATIONAL_STATS = {\n  avg_per_capita_emissions: 20.36, // i.e. 20,000 kg\n  budget: 5500000000,\n  budget_per_capita: 16.7,\n  total_emissions_2018: 6677000000,\n  total_pop: 328000000 // (2019 estimates)\n};\n\nexport default NATIONAL_STATS;\n","import React, {useEffect, useRef} from 'react';\nimport {select} from 'd3-selection';\nimport {axisBottom, axisLeft} from \"d3-axis\";\nimport {scaleLinear, scaleBand} from \"d3-scale\";\nimport {round} from 'lodash';\n\nimport NATIONAL_STATS from '../../../../data/interactive/national_statistics';\n\nconst DEBUG = 0;\n\n// TODO pass width/height and radii as props\nconst margin = {top: 0, right: 0, bottom: 0, left: 100},\n  width = 460 - margin.left - margin.right,\n  height = 150 - margin.top - margin.bottom,\n  heightTranslated = height / 3.9;\n\nfunction Budget(props) {\n  const per_capita_limit = NATIONAL_STATS.budget_per_capita;\n  const d3Container = useRef(null);\n  const data = [props.data / 1000];\n  if (DEBUG) console.log(data)\n\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .attr('preserveAspectRatio', 'xMidYMid')\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .classed('single-svg-budget', true)\n        .append(\"g\")\n        .attr(\"transform\",\n          \"translate(\" + 0 + \",\" + 0 + \")\");\n\n      var titleText = 'Your CO\\u2082 Budget';\n      svg.append('text')\n        .style('fill', 'white')\n        // .style('opacity', 0.9)\n        .attr('transform', \"translate(100,20)\")\n        .style('font-size', '18px')\n        .style('font-weight', '200')\n        .style('font-family', 'Helvetica')\n        .text(titleText);\n\n      var x = scaleLinear()\n        .domain([0, 18])\n        .range([0, width]);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + 120 + \")\")\n        .call(axisBottom(x))\n        .selectAll(\"text\")\n        .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n        .style(\"text-anchor\", \"end\");\n\n      // Y axis\n      var y = scaleBand()\n        .range([0, height/2])\n        .domain([\"\"])\n        .padding(.1);\n      svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + heightTranslated + \")\")\n        .style('opacity', \"0\")\n        .call(axisLeft(y));\n\n      //Bars\n      svg.selectAll(\"myRect\")\n        .data(data)\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", x(0) )\n        .attr(\"y\", function() { return y(\"\"); })\n        .attr(\"width\", function() { return x(data); })\n        .attr(\"height\", y.bandwidth() )\n        .attr(\"transform\", \"translate(0,\" + heightTranslated + \")\")\n        .attr(\"fill\", \"#69b3a2\")\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr('transform', \"translate(150,280)\")\n        .style('fill', 'white')\n        .style('font-family', 'Helvetica')\n        .text(\"Metric Tons\");\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr(\"x\", () => {\n          if (data[0] > 0) {\n            return x(data[0] + 0.5)\n          }\n        })\n        .attr(\"y\", height / 2)\n        .style('fill', 'white')\n        .style('font-size', '16px')\n        .style('font-weight', '900')\n        .style('font-family', 'Helvetica')\n        .text(`${round(data, 2)}`);\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr(\"x\", () => {\n          if (data[0] > 0) {\n            return x(data[0] + 0.5)\n          }\n        })\n        .attr(\"y\", height / 2 + 12)\n        .style('fill', 'white')\n        .style('opacity', 0.8)\n        .style('font-size', '12px')\n        .style('font-weight', '200')\n        .style('font-family', 'Helvetica')\n        .text(`metric tons`);\n\n      svg.append(\"line\")\n        .attr(\"x1\", x(per_capita_limit))\n        .attr(\"x2\", x(per_capita_limit))\n        .attr(\"y1\", height / 2 - height / 4 + 5)\n        .attr(\"y2\", height / 2 + height / 4)\n        .attr(\"stroke\", \"grey\")\n        .attr(\"stroke-dasharray\", \"4\");\n\n      svg.append('text')\n        .style('fill', 'white')\n        .attr(\"x\", x(15.5) + 5)\n        .attr(\"y\", height / 2 - height / 4 + 2)\n        .style('fill', 'white')\n        .style('opacity', 0.8)\n        .style('font-size', '12px')\n        .style('font-weight', '200')\n        .style('font-family', 'Helvetica')\n        .text(`${per_capita_limit} mt limit`);\n    }\n  },[data, d3Container.current]);\n\n  return (\n    <div className='single-container' ref={d3Container} />\n  );\n}\n\nexport default Budget;\n","import React, {useEffect, useState} from 'react';\nimport {Grid, Segment} from \"semantic-ui-react\";\nimport './Single.css';\nimport Categories from \"./graphs/Categories\";\nimport Comparison from \"./comparison/Comparison\";\nimport Budget from \"./graphs/Budget\";\n\nfunction Single(props) {\n\n  const [emissionsTotal, setEmissionsTotal] = useState(0);\n  const [offsetsTotal, setOffsetsTotal] = useState(0);\n  const [budgetData, setBudgetData] = useState(0);\n  const [emissionsData, setEmissionsData] = useState(0);\n\n  useEffect(() => {\n    let electricity_carbon = props.electricity;\n    let flights_carbon = props.flights.reduce((a, b) => a + (b[\"carbon\"] || 0), 0);\n    let cars_carbon = props.cars.reduce((a, b) => a + (b[\"carbon\"] || 0), 0);\n    let shipping_carbon = props.shipping.reduce((a, b) => a + (b[\"carbon\"] || 0), 0);\n    let new_emissions_data = [\n      {\"name\": \"electricity\", \"value\": electricity_carbon},\n      {\"name\": \"flights\", \"value\": flights_carbon},\n      {\"name\": \"cars\", \"value\": cars_carbon},\n      {\"name\": \"shipping\", \"value\": shipping_carbon},\n    ];\n    let new_emissions_total = new_emissions_data.reduce((a, b) => a + (b[\"value\"] || 0), 0);\n    let new_offset_total = props.vegan + props.carFree + props.ledBulbs + props.trees;\n    setEmissionsTotal(new_emissions_total);\n    setOffsetsTotal(-1 * new_offset_total);\n    setEmissionsData(new_emissions_data);\n    setBudgetData(new_emissions_total + new_offset_total);\n  }, [props]);\n\n  return (\n    <Segment className=\"single\">\n      <Grid columns={2} widths='equal'>\n        <Grid.Row>\n          <Grid.Column>\n            <Categories data={emissionsData}/>\n          </Grid.Column>\n          <Grid.Column>\n            <Budget data={budgetData}/>\n            <Comparison emissions={emissionsTotal} offsets={offsetsTotal}/>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Segment>\n  );\n}\n\nexport default Single;\n","import {min, round} from 'lodash';\nimport NATIONAL_STATS from '../../../data/interactive/national_statistics';\n\nexport const MAX_GRID_SIZE = getTotalSquares(NATIONAL_STATS.budget);\n\n// NOTE assumes emissions given in metric tons\nfunction getTotalSquares(emissions) {\n  // each square is worth 2 million metric tons\n  return emissions / 2000000;\n}\n\nexport function getGridSize(emissions) {\n  return min([MAX_GRID_SIZE, getTotalSquares(emissions)]);\n}\n\nexport function getEmissions(carbon, people) {\n  const avgEmissions = (NATIONAL_STATS.total_pop - people) *\n    NATIONAL_STATS.avg_per_capita_emissions;\n  const calculatedEmissions = people * carbon;\n  return avgEmissions + calculatedEmissions;\n}\n\nexport function getGridColor(emissions) {\n  if (emissions > NATIONAL_STATS.budget) return '#FF453A'; // red\n  if (emissions <= (NATIONAL_STATS.budget * 0.75)) return '#32D74B'; // green\n  return '#FFD60A'; // yellow\n}\n\nexport function getGridLabel(emissions) {\n  // const formatted = ((NATIONAL_STATS.budget - emissions) / 1000000).toPrecision(4);\n  const formatted = round(NATIONAL_STATS.budget - emissions).toLocaleString();\n  if (emissions > NATIONAL_STATS.budget) {\n    return `${formatted} metric tons of CO\\u2082 over`;\n  }\n  return `${formatted} metric tons of CO\\u2082 left`;\n}\n","import React, {useEffect, useRef} from 'react';\nimport {range} from 'd3-array';\nimport {select} from 'd3-selection';\n\nimport {\n  getGridColor,\n  getGridLabel,\n  getGridSize,\n  MAX_GRID_SIZE\n} from './grid-conversions';\n\n// SOURCE\n// https://bl.ocks.org/mbostock/1009139\n\nconst width = 500;\nconst height = 200;\n\nconst groupSpacing = 3;\nconst cellSpacing = 1;\nconst cellSize = Math.floor((width - 11 * groupSpacing) / 100) - cellSpacing;\nconst offset = Math.floor((width - 100 * cellSize - 90 * cellSpacing - 11 * groupSpacing) / 2);\n\nfunction Grid(props) {\n  const d3Container = useRef(null);\n  const {data} = props;\n\n  function updateGrid(newEmissions) {\n    const emissionCells = getGridSize(newEmissions);\n    const svg = select(d3Container.current).select('svg');\n    const cell = svg.select('g')\n      .selectAll('rect')\n      .data(range(MAX_GRID_SIZE));\n\n    cell.exit()\n      .remove();\n\n    cell.enter()\n      .append('rect')\n      .attr('width', cellSize)\n      .attr('height', cellSize)\n      .attr('x', i => {\n        const x0 = Math.floor(i / 100) % 10;\n        const x1 = Math.floor(i % 10);\n        return groupSpacing * x0 + (cellSpacing + cellSize) * (x1 + x0 * 10);\n      })\n      .attr('y', i => {\n        const y0 = Math.floor(i / 1000);\n        const y1 = Math.floor(i % 100 / 10);\n        return groupSpacing * y0 + (cellSpacing + cellSize) * (y1 + y0 * 10); \n      })\n      .attr('fill', i => i > emissionCells\n        ? '#8E8E93'\n        : getGridColor(newEmissions));\n\n    svg.append('text')\n      .attr('transform', `translate(${offset * 5}, ${offset - 10})`)\n      .style('fill', 'white')\n      // .style('opacity', 0.8)\n      .style('font-weight', '200')\n      .style('font-family', 'Helvetica')\n      .style('font-size', '10px')\n      .text('USA National CO\\u2082 Budget');\n\n    svg.append('rect')\n      .attr('transform', `translate(${offset * 8.4}, ${offset * 4.8 - cellSize})`)\n      .attr('width', cellSize)\n      .attr('height', cellSize)\n      .attr('fill', '#8E8E93');\n    svg.append('text')\n    .attr('transform', `translate(${offset * 8.4 + 2 * cellSize}, ${offset * 4.8 + cellSize / 3})`)\n    .style('fill', 'white')\n    .style('opacity', 0.8)\n    .style('font-weight', '200')\n    .style('font-family', 'Helvetica')\n    .style('font-size', '10px')\n    .text('> 2 million metric tons of CO\\u2082')\n\n    cell.enter()\n      .append('text')\n      .attr('transform', `translate(${0}, ${3.85 * offset})`)\n      .style('fill', d => getGridColor(newEmissions))\n      // .style('opacity', 0.8)\n      .style('font-weight', '200')\n      .style('font-family', 'Helvetica')\n      .style('font-size', '10px')\n      .text(getGridLabel(newEmissions));\n  }\n\n  // component mounted\n  useEffect(() => {\n    if (data && d3Container.current) {\n      select(d3Container.current)\n        .select('svg')\n        .remove();\n\n      const svg = select(d3Container.current)\n        .append('svg')\n        .attr('preserveAspectRatio', 'xMinYMin meet')\n        .attr('viewBox', `0 0 ${width} ${height}`);\n\n      svg.append('g')\n        .attr('class', 'cells')\n        .attr('transform', `translate(${offset}, ${offset})`);\n\n      updateGrid(data.emissions);\n    }\n  },\n  [data, d3Container.current]);\n\n  return(\n    <div className=\"national-container\" ref={d3Container} />\n  );\n}\n\nexport default Grid;\n","import React from 'react';\nimport {Segment} from \"semantic-ui-react\";\n\nimport {getEmissions} from './grid-conversions';\n\nimport Grid from './Grid';\n\nimport './National.css';\n\nconst DEBUG = 0;\n\nfunction National({carbon, people}) {\n  const emissions = getEmissions(carbon, people);\n\n  if(DEBUG) {\n    console.info('@National carbon', carbon);\n    console.info('@National emissions', emissions);\n    console.info('@National people', people);\n  }\n\n  return (\n    <Segment className=\"national\">\n      <Grid data={{emissions}} />\n    </Segment>\n  );\n}\n\nexport default National;\n","import React, {useState} from 'react';\nimport {Button, Modal, Header, Radio, Dropdown, Grid, Message} from \"semantic-ui-react\";\nimport './FlightsModal.css';\nimport airports from '../../../../data/interactive/us_airports.json';\n\nfunction FlightsModal(props) {\n\n  // Flights\n  const [oneWayRoundTrip, setOneWayRoundTrip] = useState(0);\n  const [fromDestination, setFromDestination] = useState(\"\");\n  const [toDestination, setToDestination] = useState(\"\");\n  const [errorHidden, setErrorHidden] = useState(true);\n\n  function addFlight() {\n    if (toDestination.length > 0 && fromDestination.length > 0) {\n      setErrorHidden(true);\n      let flight = {\n        \"to\": toDestination,\n        \"from\": fromDestination,\n        \"oneWayRound\": oneWayRoundTrip ? \"Round Trip\" : \"One Way\"\n      }\n      props.toggleFlightsModal(false);\n      setToDestination(\"\");\n      setFromDestination(\"\");\n      props.updateFlights(flight);\n    } else {\n      setErrorHidden(false);\n    }\n  }\n\n  function cancelFlight() {\n    setToDestination(\"\");\n    setFromDestination(\"\");\n    setOneWayRoundTrip(0);\n    setErrorHidden(true);\n    props.toggleFlightsModal(false);\n  }\n\n  return (\n    <Modal\n      open={props.openFlights}\n      size=\"tiny\"\n      className=\"flight-modal\"\n    >\n      <Header className=\"modal-header\" icon=\"plane\" content=\"Add Flight\"/>\n      <Modal.Content>\n        <Grid>\n          <Grid.Row>\n            <Grid.Column>\n              <h4>From</h4>\n              <Dropdown\n                fluid\n                options={airports}\n                placeholder='From'\n                search\n                selection\n                onChange={(event, data) => setFromDestination(data.value)}\n              />\n            </Grid.Column>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column>\n              <h4>To</h4>\n              <Dropdown\n                fluid\n                options={airports}\n                placeholder='To'\n                search\n                selection\n                onChange={(event, data) => setToDestination(data.value)}\n              />\n            </Grid.Column>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column>\n              <Radio\n                label='One Way'\n                value='One Way'\n                checked={oneWayRoundTrip === 0}\n                onChange={() => setOneWayRoundTrip(0)}\n              />\n              <br />\n              <Radio\n                label='Round Trip'\n                value='Round Trip'\n                checked={oneWayRoundTrip === 1}\n                onChange={() => setOneWayRoundTrip(1)}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        <Message negative hidden={errorHidden}>\n          <Message.Header>Something went wrong.</Message.Header>\n          <p>Please make sure you fill out all information correctly.</p>\n        </Message>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          onClick={() => cancelFlight()}>\n          Cancel\n        </Button>\n        <Button\n          color='blue'\n          content=\"Save\"\n          labelPosition='left'\n          icon='checkmark'\n          onClick={() => addFlight()}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n\nexport default FlightsModal;\n","import React, {useState} from 'react';\nimport {Button, Modal, Header, Grid, Message, Input, Dropdown} from \"semantic-ui-react\";\nimport './CarsModal.css';\nimport driving_frequency from \"../../../../data/interactive/driving_frequency.json\";\n\nfunction CarsModal(props) {\n\n  const [miles, setMiles] = useState(0);\n  const [frequency, setFrequency] = useState(\"\");\n  const [errorHidden, setErrorHidden] = useState(true);\n\n  function addCar() {\n    try {\n      let new_miles = parseInt(miles);\n      if (new_miles > 0 && frequency.length > 0) {\n        setErrorHidden(true);\n        props.toggleCarsModal(false);\n        setMiles(0);\n        props.updateCars({\"miles\": miles, \"frequency\": frequency});\n      } else {\n        setErrorHidden(false);\n      }\n    } catch(err) {\n      setErrorHidden(false);\n    }\n  }\n\n  function cancelCar() {\n    setMiles(0);\n    setErrorHidden(true);\n    props.toggleCarsModal(false);\n  }\n\n  return (\n    <Modal\n      open={props.openCars}\n      size=\"tiny\"\n      className=\"cars-modal\"\n    >\n      <Header className=\"modal-header\" icon=\"car\" content=\"Add Car\"/>\n      <Modal.Content>\n        <Grid columns={2} widths='equal'>\n          <Grid.Row>\n            <Grid.Column>\n              <h4>Miles Driven</h4>\n              <Input\n                type='number'\n                placeholder='Distance'\n                fluid\n                onChange={(event) => setMiles(event.target.value)}\n              />\n            </Grid.Column>\n            <Grid.Column>\n              <h4>Frequency</h4>\n              <Dropdown\n                fluid\n                options={driving_frequency}\n                placeholder='Frequency'\n                selection\n                onChange={(event, data) => setFrequency(data.value)}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        <Message negative hidden={errorHidden}>\n          <Message.Header>Something went wrong.</Message.Header>\n          <p>Please make sure you fill out all information.</p>\n        </Message>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          onClick={() => cancelCar()}>\n          Cancel\n        </Button>\n        <Button\n          color='blue'\n          content=\"Save\"\n          labelPosition='left'\n          icon='checkmark'\n          onClick={() => addCar()}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n\nexport default CarsModal;\n","import React, {useState} from 'react';\nimport {Button, Modal, Header, Input, Dropdown, Grid, Message} from \"semantic-ui-react\";\nimport './ShippingModal.css';\nimport shipping_methods from '../../../../data/interactive/shipping_methods.json';\n\nfunction ShippingModal(props) {\n\n  const [weight, setWeight] = useState(0);\n  const [distance, setDistance] = useState(0);\n  const [method, setMethod] = useState(\"\");\n  const [errorHidden, setErrorHidden] = useState(true);\n\n  function addShipping() {\n    try {\n      let new_weight = parseFloat(weight);\n      let new_distance = parseFloat(distance);\n\n      if (new_weight > 0 && new_distance > 0) {\n        setErrorHidden(true);\n        let item = {\n          \"weight\": new_weight,\n          \"distance\": new_distance,\n          \"method\": method\n        };\n        props.toggleShippingModal(false);\n        setWeight(0);\n        setDistance(0);\n        props.updateShipping(item);\n      } else {\n        setErrorHidden(false);\n      }\n    } catch(err) {\n      setErrorHidden(false);\n    }\n  }\n\n  function cancelShipping() {\n    setWeight(0);\n    setDistance(0);\n    setErrorHidden(true);\n    props.toggleShippingModal(false);\n  }\n\n  return (\n    <Modal\n      open={props.openShipping}\n      size=\"tiny\"\n      className=\"shipping-modal\"\n    >\n      <Header className=\"modal-header\" icon=\"box\" content=\"Add Package\"/>\n      <Modal.Content>\n        <Grid columns={3} widths=\"equal\">\n          <Grid.Row>\n            <Grid.Column>\n              <h4>Weight (lbs)</h4>\n              <Input\n                type='number'\n                placeholder='Weight'\n                fluid\n                onChange={(event) => setWeight(event.target.value)}\n              />\n            </Grid.Column>\n            <Grid.Column>\n              <h4>Distance (miles)</h4>\n              <Input\n                type='number'\n                placeholder='Distance'\n                fluid\n                onChange={(event) => setDistance(event.target.value)}\n              />\n            </Grid.Column>\n            <Grid.Column>\n              <h4>Transport Method</h4>\n              <Dropdown\n                fluid\n                options={shipping_methods}\n                placeholder='Method'\n                selection\n                onChange={(event, data) => setMethod(data.value)}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n        <Message negative hidden={errorHidden}>\n          <Message.Header>Something went wrong.</Message.Header>\n          <p>Please make sure you fill out all information correctly.</p>\n        </Message>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button\n          onClick={() => cancelShipping()}>\n          Cancel\n        </Button>\n        <Button\n          color='blue'\n          content=\"Save\"\n          labelPosition='left'\n          icon='checkmark'\n          onClick={() => addShipping()}\n        />\n      </Modal.Actions>\n    </Modal>\n  );\n}\n\nexport default ShippingModal;\n","// NOTE offset units are in kg of CO2\nexport const offsets = {\n  vegan: {\n    id: 'vegan',\n    label: 'Go vegan',\n    offset: -1556.28\n  },\n  carFree: {\n    id: 'carFree',\n    label: 'Live car free',\n    offset: -5355.57\n  },\n  ledBulbs: {\n    id: 'recycle',\n    label: 'Recycle',\n    offset: -136.08\n  },\n  trees: {\n    id: 'trees',\n    label: 'Plant a tree',\n    multiplier: true,\n    offset: -33.26\n  }\n};\n","import React from 'react';\nimport {Icon} from 'semantic-ui-react';\n\n/* EMISSIONS */\nexport const emissionsTitle = (\n  <h2>\n    <Icon color='red' name='fire' />\n    Emissions\n  </h2>\n);\n\nexport const electricityTitle = (\n  <h3 className='emissions-title'>\n    <Icon name='lightning' color='yellow' />\n    Electricity\n  </h3>\n);\n\nexport const flightsTitle = (\n  <h3>\n    <Icon name='plane' color='teal' />\n    Flights\n  </h3>\n);\n\nexport const carsTitle = (\n  <h3>\n    <Icon name='car' color='purple' />\n    Cars\n  </h3>\n);\n\nexport const shippingTitle = (\n  <h3>\n    <Icon name=\"box\" color=\"brown\" />\n    Shipping\n  </h3>\n);\n\n/* OFFSETS */\n\nexport const offsetsTitle = \n<h2>\n  <Icon color='green' name='leaf' />\n  Offsets\n</h2>;\n\n  /* MULTIPLIERS */\n\nexport const multipliersTitle = \n<h2>\n  <Icon color='blue' name='sliders horizontal'/>\n  Multipliers\n</h2>;","import React, {useState} from 'react';\nimport {filter, map} from 'lodash';\nimport {Button, Icon, Checkbox, List, Label, Popup, Modal, Message, Header} from \"semantic-ui-react\";\nimport Slider from 'rc-slider';\nimport 'rc-slider/assets/index.css';\nimport './ControlPanel.css';\nimport FlightsModal from \"./flights/FlightsModal\";\nimport CarsModal from \"./cars/CarsModal\";\nimport ShippingModal from \"./shipping/ShippingModal\";\n\nimport {offsets} from '../emission_conversions';\nimport {\n  emissionsTitle,\n  electricityTitle,\n  flightsTitle,\n  carsTitle,\n  shippingTitle,\n  offsetsTitle,\n  multipliersTitle\n} from './headers';\n\nfunction ControlPanel(props) {\n\n  const [electricityLabel, setElectricityLabel] = useState(0);\n  const [treesLabel, setTreesLabel] = useState(0);\n  const [openFlights, setOpenFlights] = useState(false);\n  const [openCars, setOpenCars] = useState(false);\n  const [openShipping, setOpenShipping] = useState(false);\n\n  const [introOpen, setIntroOpen] = useState(true);\n\n  function updateElectricityLabel(value) { setElectricityLabel(value) }\n  function updateTreesLabel(value) {\n    setTreesLabel(value);\n    // props.updateOffsets(value);\n  }\n\n  // Modal logic\n  function toggleFlightsModal(hidden) { setOpenFlights(hidden); }\n  function updateFlights(flight) { props.updateFlights(flight); }\n  function deleteFlight(flight) { props.deleteFlight(flight); }\n\n  function toggleCarsModal(hidden) { setOpenCars(hidden); }\n  function updateCars(car) { props.updateCars(car); }\n  function deleteCar(car) { props.deleteCar(car); }\n\n  function toggleShippingModal(hidden) { setOpenShipping(hidden); }\n  function updateShipping(item) { props.updateShipping(item); }\n  function deleteShipping(flight) { props.deleteShipping(flight); }\n\n  return (\n    <div className=\"input-panel\">\n      <div className=\"emissions\">\n      <Popup basic trigger={emissionsTitle}>\n      <Popup.Header>Emissions</Popup.Header>\n        <Popup.Content>\n          Add estimates for your behavior to calculate your CO<sub>2</sub> emissions.\n          Values correspond to yearly emissions.\n        </Popup.Content>\n      </Popup>\n        <div className=\"emissions-header\">\n        <Popup basic trigger={electricityTitle}>\n        <Popup.Header>Electricity</Popup.Header>\n          <Popup.Content>\n            The average American pays $50 per month.\n            Our emissions calculator uses the&nbsp;\n            <a href=\"https://www.carboninterface.com\">Carbon Interface API.</a>\n          </Popup.Content>\n        </Popup>\n          <h3 className=\"offset-tree-value\">\n            <Icon name='dollar' color='yellow' />\n            {electricityLabel}\n          </h3>\n        </div>\n        <Slider\n          onChange={updateElectricityLabel}\n          onAfterChange={props.updateElectricity}\n          step={1}\n          min={0}\n          max={500}\n        />\n      </div>\n      <div className=\"emissions\">\n        <Popup basic trigger={flightsTitle}>\n        <Popup.Header>Flights</Popup.Header>\n          <Popup.Content>\n            Our emissions calculator uses the&nbsp;\n            <a href=\"https://www.carboninterface.com\">Carbon Interface API.</a>\n          </Popup.Content>\n        </Popup>\n        { props.flights.map((flight, index) => (\n          <Button\n            as='div'\n            basic\n            className='flight-label'\n            key={index}\n            labelPosition='left'\n            size='mini'>\n            <Label as='div' basic size='mini'>\n              <Button.Content>{flight.from.toUpperCase()}\n                <Icon name='right arrow' className='flight-arrow'/>\n                {flight.to.toUpperCase()} ({flight.oneWayRound})\n              </Button.Content>\n            </Label>\n            <Button\n              animated='vertical'\n              basic\n              color='red'\n              onClick={() => deleteFlight(flight)}\n              size='mini'>\n              <Button.Content hidden><Icon name='delete' /></Button.Content>\n              <Button.Content visible>{flight.carbon} kg</Button.Content>\n            </Button>\n          </Button>\n        ))\n        }\n        <Button\n          size=\"mini\"\n          onClick={() => setOpenFlights(true)}>\n            <Icon name=\"add\" />\n            Add flight\n        </Button>\n      </div>\n      <div className=\"emissions\">\n        <Popup basic trigger={carsTitle}>\n        <Popup.Header>Cars</Popup.Header>\n          <Popup.Content>\n            This projection is based on the mileage of a Toyota Corolla 2017.\n            Our emissions calculator uses the&nbsp;\n            <a href=\"https://www.carboninterface.com\">Carbon Interface API.</a>\n          </Popup.Content>\n        </Popup>\n        { props.cars.map((car, index) => (\n          <Button\n            as='div'\n            basic\n            className='flight-label'\n            key={index}\n            labelPosition='left'\n            size='tiny'>\n            <Label as='div' basic size='tiny'>\n              <Button.Content>{car.miles} mi / {car.frequency} </Button.Content>\n            </Label>\n            <Button\n              animated='vertical'\n              basic\n              color='red'\n              onClick={() => deleteCar(car)}\n              size='tiny'>\n              <Button.Content hidden><Icon name='delete' /></Button.Content>\n              <Button.Content visible>{car.carbon} kg</Button.Content>\n            </Button>\n          </Button>\n        ))\n        }\n        <Button size=\"mini\" onClick={() => setOpenCars(true)}><Icon name=\"add\" />Add car</Button>\n      </div>\n      <div className=\"emissions\">\n        <Popup basic trigger={shippingTitle}>\n        <Popup.Header>Shipping</Popup.Header>\n          <Popup.Content>\n            Our emissions calculator uses the&nbsp;\n            <a href=\"https://www.carboninterface.com\">Carbon Interface API.</a>\n          </Popup.Content>\n        </Popup>\n        { props.shipping.map((shipment, index) => (\n          <Button\n            as='div'\n            basic\n            className='flight-label'\n            key={index}\n            labelPosition='left'\n            size='tiny'>\n            <Label as='div' basic size='tiny'>\n              <Button.Content>\n                {shipment.weight} lbs | {shipment.distance} mi | {shipment.method}\n              </Button.Content>\n            </Label>\n            <Button\n              animated='vertical'\n              basic color='red'\n              onClick={() => deleteShipping(shipment)}\n              size='tiny'>\n              <Button.Content hidden><Icon name='delete' /></Button.Content>\n              <Button.Content visible>{shipment.carbon} kg</Button.Content>\n            </Button>\n          </Button>\n        ))\n        }\n        <Button size=\"mini\" onClick={() => setOpenShipping(true)}><Icon name=\"add\" />Add package</Button>\n      </div>\n      <div className=\"emissions\">\n        <Popup basic trigger={offsetsTitle}>\n        <Popup.Header>Offsets</Popup.Header>\n          <Popup.Content>\n            <p>Select behaviors to offset your CO<sub>2</sub> emissions.</p>\n            <ul>\n              <li>Going vegan saves 3,372.91 kg of CO<sub>2</sub> per year</li>\n              <li>Living car free saves 5,355.57 kg CO<sub>2</sub> per year</li>\n              <li>Recycling saves 136.08 kg of CO<sub>2</sub> per year</li>\n              <li>Planting a tree saves 33.11kg of CO<sub>2</sub> per year</li>\n            </ul>\n          </Popup.Content>\n        </Popup>\n        {map(filter(offsets, offset => !offset.multiplier), offset => (\n          <Checkbox\n            className='offset'\n            key={`offset-${offset.id}`}\n            label={offset.label}\n            onChange={props.updateOffsets} />\n        ))}\n        <div className=\"offset-tree\">\n          <div className=\"offset-tree-header\">\n            <p className=\"offset-tree-label\">Plant a tree</p>\n            <h3 className=\"offset-tree-value\">\n              <Icon name=\"tree\" color=\"green\" />\n              {(treesLabel).toLocaleString()}\n            </h3>\n          </div>\n          <Slider\n            onChange={updateTreesLabel}\n            onAfterChange={props.updateOffsets}\n            step={1}\n            min={0}\n            max={100}\n            className=\"tree-slider\"\n          />\n        </div>\n      </div>\n      <div className=\"emissions\">\n        <Popup basic trigger={multipliersTitle}>\n        <Popup.Header>Multipliers</Popup.Header>\n          <Popup.Content>\n            Scale the people slider to see the collective action if everyone\n            had the same carbon footprint as you.\n          </Popup.Content>\n        </Popup>\n        <div className=\"emissions-header\">\n          <h3 className=\"emissions-title\">\n            <Icon name=\"users\" color=\"blue\" />\n            &nbsp;Community\n          </h3>\n          <h3 className=\"emissions-value\">\n            <Icon name=\"user\" color=\"blue\" />\n            {(props.people).toLocaleString()}\n          </h3>\n        </div>\n        <Slider\n          onChange={props.updatePeople}\n          step={20000000}\n          min={1}\n          max={328000000}\n          dots={true}\n        />\n      </div>\n\n      {/* Modals */}\n      <FlightsModal\n        openFlights={openFlights}\n        toggleFlightsModal={toggleFlightsModal}\n        updateFlights={updateFlights}\n      />\n      <ShippingModal\n        openShipping={openShipping}\n        toggleShippingModal={toggleShippingModal}\n        updateShipping={updateShipping}\n      />\n      <CarsModal\n        openCars={openCars}\n        toggleCarsModal={toggleCarsModal}\n        updateCars={updateCars}\n      />\n      <Modal\n        basic\n        onClose={() => setIntroOpen(false)}\n        open={introOpen}\n        size='small'>\n        <Header icon>\n          <div className=\"modal-icons\">\n            <Icon name='thermometer full' />\n            {/* <Icon name='globe' /> */}\n          </div>\n          <p className=\"modal-title\">Optimize your CO<sub>2</sub> budget</p>\n        </Header>\n        <Modal.Content>\n          <p className=\"modal-content\">\n            You can use this interactive visualization to explore how you can offset your own CO<sub>2</sub> emitting behviors.\n          </p>\n          <Message color='black'>\n            <Message.Header><Icon name='list ol'/> Directions</Message.Header>\n            <List ordered inverted>\n              <List.Item>You can use the control panel on the left to enter your behaviors, and explore offsets that you can do</List.Item>\n              <List.Item>The net carbon impact of your choices is visualized by your personal budget, and your goal is to stay within your 16.7 mt limit (the US's per capita goal for 2020 according to the Paris Agreement).</List.Item>\n              <List.Item>At the bottom you will see the US National CO2 emissions, far over budget. Use the people slider to visualize the impact on the national budget if more people behaved like you.</List.Item>\n            </List>\n          </Message>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button color='grey' inverted onClick={() => setIntroOpen(false)}>\n            <Icon name='checkmark' /> Ok\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    </div>\n  );\n}\n\nexport default ControlPanel;\n","import {keys, map, pick, sum, values} from 'lodash';\nimport {createSelector} from 'reselect';\n\nimport {offsets} from './emission_conversions';\n\nconst getCars = ({cars}) => sum(map(cars, car => car.carbon));\nconst getElectricity = ({electricity}) => electricity;\nconst getFlights = ({flights}) => sum(map(flights, flight => flight.carbon));\nconst getShipping = ({shipping}) => sum(map(shipping, s => s.carbon));\n\nconst getEmissions = createSelector(\n  [getCars, getElectricity, getFlights, getShipping],\n  (cars, electricity, flights, shipping) => (\n    sum([cars, electricity, flights, shipping])\n  )\n);\nconst getOffsets = (props) => sum(values(pick(props, keys(offsets))));\n\nexport const getTotalCarbon = createSelector(\n  [getEmissions, getOffsets],\n  (emissions, offsets) => ((emissions + offsets) / 1000)\n);\n","import React, {useState, useEffect} from 'react';\nimport {Container, Grid} from \"semantic-ui-react\";\nimport {filter} from \"lodash\";\nimport { v4 as uuidv4 } from 'uuid';\nimport './Interactive.css';\nimport Single from \"./single/Single\";\nimport National from \"./national/National\";\nimport ControlPanel from \"./control-panel/ControlPanel\";\n\nimport {offsets} from './emission_conversions';\nimport {getTotalCarbon} from './selectors';\n\nconst DEBUG = 0;\n\nfunction Interactive() {\n\n  const carbonInterfaceToken = \"edqnsNcjCvigIYO2mtva7Q\";\n  const carbonInterfaceURL = \"https://www.carboninterface.com/api/v1/estimates\";\n\n  // Emissions\n  const [electricity, setElectricity] = useState(0);\n  const [flights, setFlights] = useState([]);\n  const [cars, setCars] = useState([]);\n  const [shipping, setShipping] = useState([]);\n  // Offsets\n  const [vegan, setVegan] = useState(0);\n  const [carFree, setCarFree] = useState(0);\n  const [ledBulbs, setLedBulbs] = useState(0);\n  const [trees, setTrees] = useState(0);\n  // People\n  const [people, setPeople] = useState(1);\n\n  function updateElectricity(value) {\n    let kwh = parseInt(value * 100 / 11.19 * 12);\n    let new_electricity = {\n      \"type\": \"electricity\",\n      \"electricity_unit\": \"kwh\",\n      \"electricity_value\": kwh,\n      \"country\": \"us\",\n    }\n    if (kwh > 0) {\n      setElectricity(100);\n      getCarbon(new_electricity)\n        .then((carbon) => {\n          setElectricity(carbon);\n      });\n    } else {\n      setElectricity(0);\n    }\n\n  }\n\n  function updateFlights(flight) {\n    if (DEBUG) console.log(flight);\n    let new_flight;\n    if (flight.oneWayRound === \"One Way\") {\n      new_flight = {\n        \"type\": \"flight\",\n        \"passengers\": 1,\n        \"legs\": [\n          {\"departure_airport\": flight.from, \"destination_airport\": flight.to},\n        ]\n      };\n    } else {\n      new_flight = {\n        \"type\": \"flight\",\n        \"passengers\": 1,\n        \"legs\": [\n          {\"departure_airport\": flight.from, \"destination_airport\": flight.to},\n          {\"departure_airport\": flight.to, \"destination_airport\": flight.from},\n        ]\n      };\n    }\n    if (DEBUG) console.log(new_flight);\n    getCarbon(new_flight)\n      .then((carbon) => {\n        setFlights(flights.concat([{\n          id: uuidv4(),\n          from: flight.from, \"to\": flight.to,\n          oneWayRound: flight.oneWayRound,\n          carbon\n        }]))\n      });\n  }\n\n  function deleteFlight(flight) {\n    setFlights(filter(flights, (item) => { return item.id !== flight.id }))\n  }\n\n  function updateCars(car) {\n    let miles;\n    if (car.frequency === \"week\") {\n      miles = car.miles * 52;\n    }\n    let new_car = {\n      \"type\": \"vehicle\",\n      \"distance_unit\": \"mi\",\n      \"distance_value\": miles,\n      \"vehicle_model_id\": \"cc5e1c93-2684-4424-afad-40a6b8145761\"\n    }\n    getCarbon(new_car)\n      .then((carbon) => {\n        setCars(cars.concat([{\n          id: uuidv4(),\n          miles: car.miles,\n          frequency: car.frequency,\n          carbon\n        }]));\n      });\n  }\n\n  function deleteCar(car) {\n    setCars(filter(cars, (item) => { return item.id !== car.id }))\n  }\n\n  function updateShipping(item) {\n    let new_item = {\n      \"type\": \"shipping\",\n      \"weight_value\": item.weight,\n      \"weight_unit\": \"lb\",\n      \"distance_value\": item.distance,\n      \"distance_unit\": \"mi\",\n      \"transport_method\": item.method\n    };\n    if (DEBUG) console.log(new_item);\n    getCarbon(new_item)\n      .then((carbon) => {\n        setShipping(shipping.concat([{\n          id: uuidv4(),\n          weight: item.weight,\n          distance: item.distance,\n          method: item.method,\n          carbon\n        }]));\n      });\n  }\n\n  function deleteShipping(shipment) {\n    setShipping(filter(shipping, (item) => { return item.id !== shipment.id }))\n  }\n\n  function updateOffsets(event, data) {\n    if (typeof event === \"number\") {\n      // Set trees to event (the number of trees) x whatever constant we use\n      setTrees(event * offsets.trees.offset);\n    } else {\n      switch (data.label) {\n        case offsets.vegan.label:\n          setVegan(data.checked ? offsets.vegan.offset : 0);\n          break;\n        case offsets.carFree.label:\n          setCarFree(data.checked ? offsets.carFree.offset : 0);\n          break;\n        case offsets.ledBulbs.label:\n          setLedBulbs(data.checked ? offsets.ledBulbs.offset : 0);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  // This needs to change all the values aaaaaahhhhh\n  function updatePeople(value) {\n    if (value !== 1) {\n      setPeople(value - 1);\n    } else {\n      setPeople(1);\n    }\n  }\n\n  function getCarbon(json) {\n    return fetch(carbonInterfaceURL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${carbonInterfaceToken}`\n      },\n      body: JSON.stringify(json),\n    })\n      .then(response => response.json())\n      .then(data => {\n        console.info('@getCarbon data', data);\n        return data.data.attributes.carbon_kg\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  }\n\n  useEffect(() => {\n    if (DEBUG) {\n      console.log(\"Electricity: \" + electricity);\n      console.log(\"Flights: \");\n      console.log(flights);\n      console.log(\"Cars: \");\n      console.log(cars);\n      console.log(\"Shipping: \");\n      console.log(shipping);\n      console.log(\"Vegan: \" + vegan);\n      console.log(\"Car Free: \" + carFree);\n      console.log(\"LED: \" + ledBulbs);\n      console.log(\"Trees: \" + trees);\n      console.log(\"People: \" + people);\n      console.log(\"------------------------------\")\n    }\n  }, [electricity, flights, shipping, cars, vegan, carFree, ledBulbs, trees, people]);\n\n  // NOTE i don't know where else to put this variable...\n  const totalCarbon = getTotalCarbon({\n    electricity, flights, shipping, cars, vegan, carFree, ledBulbs, trees\n  });\n  return (\n    <Container className=\"interactive\">\n      <Grid className=\"interactive-grid\" columns={3}>\n        <Grid.Row className=\"header\" stretched>\n          <Grid.Column width={5}>\n            <h3>Measure Carbon Emissions</h3>\n          </Grid.Column>\n          <Grid.Column width={11}>\n            <h3>Total Carbon Impact</h3>\n          </Grid.Column>\n        </Grid.Row>\n        <Grid.Row className=\"viz-panels\" stretched>\n          <Grid.Column width={5}>\n            <ControlPanel\n              electricity={electricity}\n              updateElectricity={updateElectricity}\n              flights={flights}\n              updateFlights={updateFlights}\n              deleteFlight={deleteFlight}\n              cars={cars}\n              updateCars={updateCars}\n              deleteCar={deleteCar}\n              shipping={shipping}\n              updateShipping={updateShipping}\n              deleteShipping={deleteShipping}\n              updateOffsets={updateOffsets}\n              people={people}\n              updatePeople={updatePeople}\n            />\n          </Grid.Column>\n          <Grid.Column width={11}>\n            <Single\n              electricity={electricity}\n              flights={flights}\n              cars={cars}\n              shipping={shipping}\n              vegan={vegan}\n              carFree={carFree}\n              ledBulbs={ledBulbs}\n              trees={trees}\n            />\n            <National carbon={totalCarbon} people={people} />\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default Interactive;\n","import React from 'react';\nimport {Grid, Icon, Menu, Segment} from \"semantic-ui-react\";\nimport './Footer.css';\n\nfunction Footer() {\n\n  return (\n    <div className=\"footer\">\n      <Segment inverted>\n        <Grid columns={1} stackable textAlign='center'>\n          <Menu inverted secondary>\n            <Menu.Item\n              name='Story'\n              href='#/'\n            />\n            <Menu.Item\n              name='Your Impact'\n              href='#/interactive'\n            />\n          </Menu>\n        </Grid>\n        <Grid id='footer-text' columns={1} stackable textAlign='center'>\n          <Icon name='tree'/><span id='grawnola'>grawnola</span>\n        </Grid>\n      </Segment>\n    </div>\n  );\n}\n\nexport default Footer;\n","import Narrative from './narrative/Narrative';\nimport Interactive from './interactive/Interactive';\nimport React from 'react';\nimport {Switch, Route} from 'react-router-dom';\nimport './App.css';\nimport Footer from \"./footer/Footer\";\n\nfunction App() {\n\n  return (\n    <div className=\"app\">\n      <Switch>\n        <Route exact path='/' component={Narrative}/>\n        <Route exact path='/interactive' component={Interactive}/>\n      </Switch>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","import App from './components/App';\nimport {HashRouter} from \"react-router-dom\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css'\nimport './index.css';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}